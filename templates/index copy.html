<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đề 2 - Nhóm 2</title>
    <style>
        html {
            font-family: Arial, Helvetica, sans-serif;
            height: 100%;
        }
        body {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .heading {
            height: 20%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .app {
            height: 80%;
        }
        .container {
            height: 100%;
        }
        table {
            width: 100%;
            margin-top: 20px;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <div class="heading">
            <h2>Bài toán hồi quy - Dự đoán Điểm thi của học sinh</h2>
            <p>Theo các phương pháp: Hồi quy tuyến tính, Lasso, Neural Network và Stacking</p>
        </div>
        <div class="app row">
            <form id="predictionForm" class="col-6">
                <div class="form-group">
                    <label for="MedInc">MedInc:</label>
                    <input class="form-control" type="text" id="MedInc" name="MedInc" required>
                </div>
                <div class="form-group">
                    <label for="HouseAge">HouseAge:</label>
                    <input class="form-control" type="text" id="HouseAge" name="HouseAge" required>
                </div>
                <div class="form-group mb-3">
                    <label for="AveRooms">AveRooms:</label>
                    <input class="form-control" type="text" id="AveRooms" name="AveRooms" required>
                </div>
                <div class="form-group mb-3">
                    <label for="AveBedrms">AveBedrms:</label>
                    <input class="form-control" type="text" id="AveBedrms" name="AveBedrms" required>
                </div>
                <div class="form-group mb-3">
                    <label for="Population">Population:</label>
                    <input class="form-control" type="text" id="Population" name="Population" required>
                </div>
                <div class="form-group mb-3">
                    <label for="AveOccup">AveOccup:</label>
                    <input class="form-control" type="text" id="AveOccup" name="AveOccup" required>
                </div>
                <button class="btn btn-primary" type="submit">Dự đoán</button>
            </form>

            <div id="results" class="col-6"> 
                <table class="table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Prediction</th>
                            <th>MAE</th>
                            <th>MSE</th>
                            <th>R2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Linear Regression</td>
                            <td id="linearPrediction">Trống</td>
                            <td id="linearMAE">Trống</td>
                            <td id="linearMSE">Trống</td>
                            <td id="linearR2">Trống</td>
                        </tr>
                        <tr>
                            <td>Lasso</td>
                            <td id="lassoPrediction">Trống</td>
                            <td id="lassoMAE">Trống</td>
                            <td id="lassoMSE">Trống</td>
                            <td id="lassoR2">Trống</td>
                        </tr>
                        <tr>
                            <td>Neural Network</td>
                            <td id="mlpPrediction">Trống</td>
                            <td id="mlpMAE">Trống</td>
                            <td id="mlpMSE">Trống</td>
                            <td id="mlpR2">Trống</td>
                        </tr>
                        <tr>
                            <td>Stacking</td>
                            <td id="stackingPrediction">Trống</td>
                            <td id="stackingMAE">Trống</td>
                            <td id="stackingMSE">Trống</td>
                            <td id="stackingR2">Trống</td>
                        </tr>
                    </tbody>
                </table>

                <div>
                    <img id="linearErrorDist" src="" alt="Linear Regression Error Distribution" style="width: 100%; height: auto;">
                    <img id="linearPredPlot" src="" alt="Linear Regression Prediction Plot" style="width: 100%; height: auto;">
                </div>
                <!-- Thêm các hình ảnh cho các mô hình khác tương tự -->
            </div>
        </div>
    </div>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const formData = new FormData(this);

            fetch('/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('linearPrediction').textContent = data.linear_prediction.toFixed(2);
                document.getElementById('linearMAE').textContent = data.linear_MAE.toFixed(2);
                document.getElementById('linearMSE').textContent = data.linear_MSE.toFixed(2);
                document.getElementById('linearR2').textContent = data.linear_R2.toFixed(2);

                document.getElementById('lassoPrediction').textContent = data.lasso_prediction.toFixed(2);
                document.getElementById('lassoMAE').textContent = data.lasso_MAE.toFixed(2);
                document.getElementById('lassoMSE').textContent = data.lasso_MSE.toFixed(2);
                document.getElementById('lassoR2').textContent = data.lasso_R2.toFixed(2);

                document.getElementById('mlpPrediction').textContent = data.mlp_prediction.toFixed(2);
                document.getElementById('mlpMAE').textContent = data.mlp_MAE.toFixed(2);
                document.getElementById('mlpMSE').textContent = data.mlp_MSE.toFixed(2);
                document.getElementById('mlpR2').textContent = data.mlp_R2.toFixed(2);

                document.getElementById('stackingPrediction').textContent = data.stacking_prediction.toFixed(2);
                document.getElementById('stackingMAE').textContent = data.stacking_MAE.toFixed(2);
                document.getElementById('stackingMSE').textContent = data.stacking_MSE.toFixed(2);
                document.getElementById('stackingR2').textContent = data.stacking_R2.toFixed(2);

                document.getElementById('linearErrorDist').src = '/static/images/linear_error_distribution.png';
                document.getElementById('linearPredPlot').src = '/static/images/linear_prediction_plot.png';
                // Cập nhật các hình ảnh cho các mô hình khác tương tự
            })
            .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
